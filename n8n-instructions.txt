â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  BIBLIOTECA DE RECETAS ECUATORIANAS â€” GUÃA COMPLETA DE CONFIGURACIÃ“N n8n
  Revista Premium de GastronomÃ­a y Turismo Ecuatoriano
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Fecha:   2026-02-23
VersiÃ³n: 2.0 â€” Multi-nicho (Local + DiÃ¡spora + Turismo)
Repo:    https://github.com/LordRa2pat/recetas-ecuador
Site:    https://recetas-ecuador.vercel.app
Workflow ID: b8Yncjf4NRZE6kqj

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SECCIÃ“N 1 â€” ESTRATEGIA EDITORIAL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

El sitio sirve a TRES audiencias simultÃ¡neas con el mismo JSON:

1. LOCAL (Ecuador)        â€” Recetas clÃ¡sicas para cocinar en Ecuador
2. DIÃSPORA (Exterior)    â€” Ecuatorianos en EE.UU./Europa que quieren cocinar
                            platos patrios con ingredientes locales
3. TURISTA (Visitantes)   â€” Viajeros que quieren explorar la gastronomÃ­a
                            y saber DÃ“NDE probar los platos

Cada receta puede servir a 1, 2 o 3 audiencias segÃºn los campos opcionales
que se incluyan (ver esquema JSON en SecciÃ³n 3).

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SECCIÃ“N 2 â€” WORKFLOW n8n: RECETAS-AI-Auto-Publisher
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

El workflow corre de lunes a viernes a las 10:00 AM hora Ecuador (UTC-5).
Flujo: Schedule â†’ Nombrador â†’ Chef Redactor â†’ Parser â†’ GET GitHub â†’ Merge â†’ PUT GitHub

NODO 1: Schedule Trigger
  - Cron: 0 15 * * 1-5  (10:00 AM EC = 15:00 UTC)

NODO 2: Nombrador de Plato (Grok â€” grok-2-mini)
  - HTTP POST â†’ https://api.x.ai/v1/chat/completions
  - Elige 1 plato ecuatoriano que aÃºn NO estÃ© en recipes.json
  - Output: choices[0].message.content = nombre del plato

NODO 3: Chef Redactor (Grok â€” grok-2)
  - HTTP POST â†’ https://api.x.ai/v1/chat/completions
  - Usa el MASTER PROMPT completo (ver SecciÃ³n 4)
  - Output: choices[0].message.content = JSON de la receta

NODO 4: Parsear Receta JSON (Code Node)
  - Lee la respuesta del LLM y extrae el JSON
  - Ver cÃ³digo en SecciÃ³n 5

NODO 5: GET recipes.json (HTTP Request â†’ GitHub API)
  - GET https://api.github.com/repos/LordRa2pat/recetas-ecuador/contents/recipes.json
  - Headers: Authorization: Bearer {TOKEN}, User-Agent: n8n-bot

NODO 6: Merge + Preparar Commit (Code Node)
  - Decodifica base64, agrega nueva receta, re-encoda
  - Ver cÃ³digo en SecciÃ³n 5

NODO 7: PUT recipes.json a GitHub (HTTP Request)
  - PUT mismo endpoint
  - Body: { message, content (base64), sha }
  - El commit en GitHub dispara auto-deploy en Vercel

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SECCIÃ“N 3 â€” ESQUEMA JSON COMPLETO DE RECETA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

CAMPOS OBLIGATORIOS:
{
  "id":               integer (auto-incremental),
  "slug":             "nombre-del-plato-en-kebab-case",
  "title":            "Nombre del Plato",
  "description":      "DescripciÃ³n apetitosa de 1-2 oraciones (60-120 chars)",
  "region":           "Sierra" | "Costa" | "Amazonia" | "Galapagos",
  "category":         "Sopas" | "Platos Fuertes" | "Entradas" | "Postres" | "Bebidas" | "Desayunos" | "Mariscos",
  "difficulty":       "FÃ¡cil" | "Media" | "DifÃ­cil",
  "servings":         "4 personas",
  "prep_time":        "15 min",
  "cook_time":        "30 min",
  "total_time":       "45 min",
  "image_url":        "https://images.unsplash.com/photo-XXXXX?w=800&q=80",
  "ingredients":      [ "2 tazas de maÃ­z", "1 cebolla paiteÃ±a", ... ],
  "instructions":     [ "Paso 1...", "Paso 2...", ... ],
  "keywords":         [ "locro", "papas", "sierra ecuatoriana", ... ],
  "date_published":   "2026-02-23"
}

CAMPOS OPCIONALES (aÃ±aden contenido multi-nicho):

  "tips":             [ "Tip 1...", "Tip 2..." ],

  // DIÃSPORA â€” Para ecuatorianos viviendo en el exterior
  "target_audience":  "Local" | "DiÃ¡spora" | "Turista",

  "international_substitutes": [
    {
      "original":          "Achiote (pasta)",
      "sustituto_usa":     "Annatto seeds or Sazon seasoning",
      "sustituto_europa":  "Colorante alimentario + pimentÃ³n dulce"
    },
    {
      "original":          "Cebolla paiteÃ±a",
      "sustituto_usa":     "Red onion",
      "sustituto_europa":  "Cebolla morada"
    }
  ],

  // TURISMO â€” Para viajeros que visitan Ecuador
  "tourism_route": "ğŸ“ Quito: Mercado Central (Av. Pichincha), La Mariscal o GuÃ¡pulo. Pide el locro 'con todo' â€” con cuero de cerdo y aguacate. Precio referencial: $3-6 USD."

NOTAS:
- Los 3 campos opcionales son completamente opcionales. Sin ellos, la receta
  funciona normal para audiencia "Local".
- NO inventar URLs de imÃ¡genes. Usar Unsplash con query real del plato.
  Ejemplo: https://images.unsplash.com/photo-1567337710282-00832b415979?w=800&q=80
- El campo "slug" debe ser Ãºnico. MinÃºsculas, sin acentos, hÃ­fens.
  Ejemplo: "locro-de-papa", "seco-de-pollo", "encebollado-de-atun"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SECCIÃ“N 4 â€” MASTER PROMPT: CHEF REDACTOR + GUÃA TURÃSTICO + SEO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Usar este prompt en el nodo "Chef Redactor" (GPT-4o).
Variable de entrada: {{ $json.output }} = nombre del plato elegido.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SYSTEM PROMPT:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Eres un equipo de tres expertos combinados en un solo prompt:

1. CHEF ECUATORIANO PROFESIONAL: Conoces todas las recetas regionales del
   Ecuador (Sierra, Costa, AmazonÃ­a, GalÃ¡pagos) con profundidad gastronÃ³mica,
   proporciones exactas, tÃ©cnicas de cocciÃ³n y variantes regionales.

2. GUÃA TURÃSTICO Y CONSULTOR DE DIÃSPORA: Para platos con ingredientes
   difÃ­ciles de conseguir fuera de Ecuador, sabes exactamente quÃ© sustitutos
   usar en EE.UU. y Europa. TambiÃ©n conoces dÃ³nde probar cada plato en Ecuador
   (mercados, restaurantes, ciudades), lo cual es valioso para turistas.

3. EXPERTO SEO CULINARIO: Escribes tÃ­tulos y descripciones optimizados para
   Google Search. Generas keywords long-tail relevantes (ej: "cÃ³mo hacer locro
   de papa ecuatoriano", "receta encebollado costa ecuatoriana").

REGLAS:
- Responde ÃšNICAMENTE con JSON vÃ¡lido, sin markdown, sin explicaciones.
- No inventes recetas. Usa proporciones reales de la cocina ecuatoriana.
- Si el plato tiene ingredientes difÃ­ciles de conseguir fuera de Ecuador,
  SIEMPRE aÃ±ade "international_substitutes".
- Si el plato tiene una ruta gastronÃ³mica clara, SIEMPRE aÃ±ade "tourism_route".
- Para platos muy locales (fritada, hornado, yaguarlocro), incluye AMBOS
  campos opcionales (substitutes + tourism).
- Usa imÃ¡genes de Unsplash relevantes (formato: https://images.unsplash.com/photo-ID?w=800&q=80)
- El "slug" debe ser en kebab-case sin acentos.
- La "description" debe ser apetitosa y de mÃ¡ximo 120 caracteres.
- "keywords" debe incluir 5-8 tÃ©rminos, incluyendo variantes regionales y
  tÃ©rminos de bÃºsqueda en espaÃ±ol.
- Incluye 6-10 ingredientes precisos con cantidades.
- Incluye 5-8 pasos de instrucciones claros y detallados.
- Incluye 2-4 tips prÃ¡cticos del chef.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
USER PROMPT:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Crea la receta completa para: {{ $json.output }}

Responde con un objeto JSON que siga EXACTAMENTE este esquema
(incluye los campos opcionales cuando sean relevantes):

{
  "slug": "...",
  "title": "...",
  "description": "...",
  "region": "Sierra|Costa|Amazonia|Galapagos",
  "category": "Sopas|Platos Fuertes|Entradas|Postres|Bebidas|Desayunos|Mariscos",
  "difficulty": "FÃ¡cil|Media|DifÃ­cil",
  "servings": "X personas",
  "prep_time": "X min",
  "cook_time": "X min",
  "total_time": "X min",
  "image_url": "https://images.unsplash.com/photo-XXXX?w=800&q=80",
  "ingredients": ["cantidad ingrediente", ...],
  "instructions": ["Paso 1...", "Paso 2...", ...],
  "tips": ["Tip 1...", "Tip 2..."],
  "keywords": ["keyword1", "keyword2", ...],
  "date_published": "2026-02-23",

  // OPCIONAL â€” Incluir si el plato es popular fuera de Ecuador:
  "target_audience": "DiÃ¡spora",
  "international_substitutes": [
    { "original": "...", "sustituto_usa": "...", "sustituto_europa": "..." }
  ],

  // OPCIONAL â€” Incluir si hay una ruta gastronÃ³mica clara:
  "tourism_route": "ğŸ“ [Ciudad]: [Lugar especÃ­fico]. [DescripciÃ³n corta]. Precio: $X-Y USD."
}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SECCIÃ“N 5 â€” CÃ“DIGO DE LOS CODE NODES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€ NODO 4: Parsear Receta JSON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// Extrae el JSON de la respuesta de Grok (formato OpenAI-compatible)
const response = $input.first().json;
const text = response.choices?.[0]?.message?.content
  || response.message?.content
  || response.text
  || '';

// Extraer JSON del texto (puede venir con o sin markdown fences)
const jsonMatch = text.match(/\{[\s\S]*\}/);
if (!jsonMatch) throw new Error('No se encontrÃ³ JSON en la respuesta del LLM: ' + text.substring(0, 200));

const recipe = JSON.parse(jsonMatch[0]);

// Validaciones mÃ­nimas
if (!recipe.title) throw new Error('Campo "title" faltante');
if (!recipe.slug) {
  recipe.slug = recipe.title.toLowerCase()
    .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
    .replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');
}

return [{ json: recipe }];

â”€â”€ NODO 6: Merge + Preparar Commit â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// Recibe: nodo 4 (receta) + nodo 5 (respuesta GitHub)
const recipe = $('Parsear Receta JSON').first().json;
const githubData = $('GET recipes.json').first().json;

// Decodificar el JSON actual de GitHub (base64)
const currentContent = Buffer.from(githubData.content.replace(/\n/g, ''), 'base64').toString('utf-8');
let recipes = JSON.parse(currentContent);

// Verificar duplicados por slug
const isDuplicate = recipes.some(r => r.slug === recipe.slug);
if (isDuplicate) {
  throw new Error('Slug duplicado: ' + recipe.slug + '. Elige otro plato.');
}

// Asignar ID auto-incremental
const maxId = recipes.reduce((max, r) => Math.max(max, r.id || 0), 0);
recipe.id = maxId + 1;

// Agregar al inicio del array (mÃ¡s recientes primero)
recipes.unshift(recipe);

// Preparar contenido para GitHub API
const newContent = Buffer.from(JSON.stringify(recipes, null, 2)).toString('base64');
const commitMessage = 'feat(recipe): agregar ' + recipe.title + ' (#' + recipe.id + ')';

return [{
  json: {
    content: newContent,
    sha: githubData.sha,
    message: commitMessage,
    recipe_title: recipe.title,
    recipe_id: recipe.id
  }
}];

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SECCIÃ“N 6 â€” CONFIGURACIÃ“N HTTP REQUEST NODES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€ NODOS 2 y 3: Grok API (Nombrador + Chef Redactor) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Method:  POST
  URL:     https://api.x.ai/v1/chat/completions
  Headers:
    Authorization:  Bearer xai-TU_API_KEY_AQUI
    Content-Type:   application/json
  Body (JSON):
    { "model": "grok-2-mini",  â† Nombrador (rÃ¡pido)
      "model": "grok-2",       â† Chef Redactor (mÃ¡s capaz)
      "max_tokens": 30 / 2500,
      "messages": [{ "role": "system", ... }, { "role": "user", ... }] }

  ObtÃ©n tu API key en: https://console.x.ai/

â”€â”€ NODO 5: GET recipes.json â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Method:  GET
  URL:     https://api.github.com/repos/LordRa2pat/recetas-ecuador/contents/recipes.json
  Headers:
    Authorization:  Bearer ghp_XXXXXXXXXXXXXXXX
    User-Agent:     n8n-recetas-bot
    Accept:         application/vnd.github.v3+json

â”€â”€ NODO 7: PUT recipes.json â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Method:  PUT
  URL:     https://api.github.com/repos/LordRa2pat/recetas-ecuador/contents/recipes.json
  Headers:
    Authorization:  Bearer ghp_XXXXXXXXXXXXXXXX
    User-Agent:     n8n-recetas-bot
    Content-Type:   application/json
    Accept:         application/vnd.github.v3+json
  Body (JSON expression):
    ={{
      {
        "message": $json.message,
        "content": $json.content,
        "sha": $json.sha
      }
    }}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SECCIÃ“N 7 â€” FORMATO DE MENSAJE PARA NOMBRADOR DE PLATO (NODO 2)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

SYSTEM: Eres un experto en gastronomÃ­a ecuatoriana.

USER: Lista los slugs actuales en recipes.json:
{{ $json.slugs_list }}

Elige UN plato ecuatoriano que NO estÃ© en esa lista. Puede ser:
- Un plato principal (seco, sopa, caldo, asado, guiso)
- Un postre o bebida tÃ­pica
- Un plato de desayuno
- Un plato costero, serrano o amazÃ³nico poco conocido

Responde SOLO con el nombre del plato en espaÃ±ol, sin explicaciones.
Ejemplos vÃ¡lidos: "Seco de chivo", "Chupe de pescado", "Jucho serrano"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SECCIÃ“N 8 â€” PRUEBA LOCAL CON n8n-receiver.js
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

El script n8n-receiver.js permite insertar recetas localmente para testing.
Guarda el JSON del plato en un archivo temporal, luego ejecuta:

  node n8n-receiver.js "$(cat test-recipe.json)"

Esto:
  1. Parsea el JSON
  2. Asigna ID auto-incremental
  3. Verifica duplicados por slug
  4. Agrega al inicio de recipes.json (mÃ¡s reciente primero)
  5. Escribe atÃ³micamente (previene corrupciÃ³n)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SECCIÃ“N 9 â€” CAMPOS DE IMÃGENES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Para "image_url" usar Unsplash con query relacionado al plato.
Formato: https://images.unsplash.com/photo-{ID}?w=800&q=80

Ejemplo por tipo de plato:
  Sopas/caldos:     photo-1548940740-204726a19be3
  Arroces:          photo-1596560548464-f010549b84d7
  Mariscos:         photo-1569050467447-ce54b3bbc37d
  Carnes asadas:    photo-1558030006-450675393462
  Postres:          photo-1488477181946-6428a0291777
  Bebidas:          photo-1544145945-f90425340c7e
  Desayunos:        photo-1533089860892-a7c6f0a88666

Si no existe una imagen exacta, usa una relacionada a la regiÃ³n o ingrediente
principal. NUNCA dejes image_url vacÃ­o.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SECCIÃ“N 10 â€” TROUBLESHOOTING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

PROBLEMA: El workflow falla con "409 Conflict" en el PUT de GitHub
SOLUCIÃ“N: El SHA en el nodo GET ya no coincide (alguien editÃ³ el archivo).
          Espera unos minutos y vuelve a ejecutar. El GET traerÃ¡ el SHA correcto.

PROBLEMA: La receta tiene campos null o vacÃ­os
SOLUCIÃ“N: Revisar el Master Prompt en el nodo "Chef Redactor". Asegurarse de
          que el modelo recibe el esquema JSON completo.

PROBLEMA: Vercel no hace deploy automÃ¡tico
SOLUCIÃ“N: Verificar que el repositorio de GitHub estÃ¡ conectado en Vercel.
          Settings â†’ Git â†’ ProducciÃ³n Branch: main

PROBLEMA: slug duplicado
SOLUCIÃ“N: El Nodo 6 lanza un error. n8n marcarÃ¡ la ejecuciÃ³n como fallida.
          Es normal â€” el siguiente dÃ­a el Nombrador elegirÃ¡ otro plato.

PROBLEMA: El JSON del LLM tiene markdown fences (```json ... ```)
SOLUCIÃ“N: El regex en el Nodo 4 (/\{[\s\S]*\}/) ya maneja este caso,
          extrae solo el objeto JSON independientemente del wrapper.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FIN DEL DOCUMENTO â€” v2.0 â€” Biblioteca de Recetas Ecuatorianas 2026
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
